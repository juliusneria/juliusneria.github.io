function activitiesCtrl(a,b,c,d){function e(c){var d=Parse.Object.extend("Activity"),e=new d;e.set("title",a.activityTitle),e.set("feature",a.activityFeature),e.set("picture",c),e.save({success:function(){var a=UIkit.modal("#addModal");a.isActive()?a.hide():a.show(),b.notification("Activity has been saved"),h()},error:function(a){b.notification("Something went wrong")}})}function f(c){var d=Parse.Object.extend("Activity"),e=new d;e.id=a.editActivityItem.id,e.set("title",a.editActivityItem.title),e.set("feature",a.editActivityItem.feature),null!=c&&e.set("picture",c),e.save({success:function(){var a=UIkit.modal("#editModal");a.isActive()?a.hide():a.show(),b.notification("Activity has been saved"),h()},error:function(a){b.notification("Something went wrong")}})}function g(a){var c=Parse.Object.extend("Activity");new Parse.Query(c).get(a.id,{success:function(a){a.destroy({success:function(){var a=UIkit.modal("#deleteModal");a.isActive()?a.hide():a.show(),b.notification("Activity has been removed"),h()},error:function(){b.notification("Something went wrong")}})},error:function(a,c){b.notification("Something went wrong")}})}function h(){var c=Parse.Object.extend("Activity");new Parse.Query(c).find({success:function(b){a.activitiesImages=[];for(var c in b)a.activitiesImages.push({id:b[c].id,picture:b[c].get("picture"),feature:b[c].get("feature"),title:b[c].get("title")});a.$apply()},error:function(a){b.notification("Something went wrong")}})}a.activitiesImages=[],a.activityImage=null,a.activityFeature=null,a.activityTitle=null,h(),a.addActivity=function(){if(a.activityImage=$("#activityPicture")[0].files[0],null==a.activityFeature)b.notification("Feature must specified");else if(null==a.activityImage)b.notification("No Image uploaded");else if(null==a.activityTitle)b.notification("Title must specified");else{var c=new FileReader;c.readAsDataURL(a.activityImage),c.onload=function(){new Parse.File($("#activityPicture")[0].files[0].name,{base64:c.result}).save({success:function(a){e(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}},a.editActivity=function(b){a.editActivityItem=b},a.deleteActivity=function(b,c){a.deleteActivityItem=b},a.updateActivity=function(){if(a.activityImage=$("#editImageActivity")[0].files[0],""==a.editActivityItem.title)b.notification("Title must specified");else if(""==a.editActivityItem.feature)b.notification("Feature must specified");else if(null!=a.activityImage){var c=new FileReader;c.readAsDataURL(a.activityImage),c.onload=function(){new Parse.File($("#editImageActivity")[0].files[0].name,{base64:c.result}).save({success:function(a){f(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}else f(null)},a.dropActivity=function(){g(a.deleteActivityItem)}}angular.module("Admin").controller("activitiesCtrl",activitiesCtrl),activitiesCtrl.$inject=["$scope","uikitService","$state","$localStorage"];