function activitiesCtrl(a,b,c,d){function e(c){var d=Parse.Object.extend("Activity"),e=new d;e.set("title",a.activityTitle),e.set("feature",a.activityFeature),e.set("picture",c),e.save({success:function(){var c=UIkit.modal("#addModal");c.isActive()?c.hide():c.show(),b.notification("Activity has been saved"),a.isLoadingActivity.add=!1,h()},error:function(a){b.notification("Something went wrong")}})}function f(c){var d=Parse.Object.extend("Activity"),e=new d;e.id=a.editActivityItem.id,e.set("title",a.editActivityItem.title),e.set("feature",a.editActivityItem.feature),null!=c&&e.set("picture",c),e.save({success:function(){var c=UIkit.modal("#editModal");c.isActive()?c.hide():c.show(),b.notification("Activity has been saved"),a.isLoadingActivity.edit=!1,h()},error:function(a){b.notification("Something went wrong")}})}function g(c){var d=Parse.Object.extend("Activity");new Parse.Query(d).get(c.id,{success:function(c){c.destroy({success:function(){var c=UIkit.modal("#deleteModal");c.isActive()?c.hide():c.show(),b.notification("Activity has been removed"),a.isLoadingActivity.delete=!1,h()},error:function(){b.notification("Something went wrong")}})},error:function(a,c){b.notification("Something went wrong")}})}function h(){var c=Parse.Object.extend("Activity");new Parse.Query(c).find({success:function(b){a.activitiesImages=[];for(var c in b)a.activitiesImages.push({id:b[c].id,picture:b[c].get("picture"),feature:b[c].get("feature"),title:b[c].get("title")});a.$apply()},error:function(a){b.notification("Something went wrong")}})}a.activitiesImages=[],a.activityImage=null,a.activityFeature=null,a.activityTitle=null,a.isLoadingActivity={add:!1,edit:!1,delete:!1},h(),a.addActivity=function(){if(a.activityImage=$("#activityPicture")[0].files[0],a.isLoadingActivity.add=!0,null==a.activityFeature)b.notification("Feature must specified"),a.isLoadingActivity.add=!1;else if(null==a.activityImage)b.notification("No Image uploaded"),a.isLoadingActivity.add=!1;else if(null==a.activityTitle)b.notification("Title must specified"),a.isLoadingActivity.add=!1;else{var c=new FileReader;c.readAsDataURL(a.activityImage),c.onload=function(){new Parse.File($("#activityPicture")[0].files[0].name,{base64:c.result}).save({success:function(a){e(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}},a.editActivity=function(b){a.editActivityItem=b},a.deleteActivity=function(b,c){a.deleteActivityItem=b},a.updateActivity=function(){if(a.activityImage=$("#editImageActivity")[0].files[0],a.isLoadingActivity.edit=!0,""==a.editActivityItem.title)b.notification("Title must specified"),a.isLoadingActivity.edit=!1;else if(""==a.editActivityItem.feature)b.notification("Feature must specified"),a.isLoadingActivity.edit=!1;else if(null!=a.activityImage){var c=new FileReader;c.readAsDataURL(a.activityImage),c.onload=function(){new Parse.File($("#editImageActivity")[0].files[0].name,{base64:c.result}).save({success:function(a){f(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}else f(null)},a.dropActivity=function(){a.isLoadingActivity.delete=!0,g(a.deleteActivityItem)}}angular.module("Admin").controller("activitiesCtrl",activitiesCtrl),activitiesCtrl.$inject=["$scope","uikitService","$state","$localStorage"];