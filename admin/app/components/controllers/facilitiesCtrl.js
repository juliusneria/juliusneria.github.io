function facilitiesCtrl(a,b,c,d){function e(c){var d=Parse.Object.extend("Facility"),e=new d;e.set("title",a.facilityTitle),e.set("feature",a.facilityFeature),e.set("description",a.facilityDescription),e.set("picture",c),e.save({success:function(){var a=UIkit.modal("#add");a.isActive()?a.hide():a.show(),b.notification("Facility has been saved"),h()},error:function(a){b.notification("Something went wrong")}})}function f(c){var d=Parse.Object.extend("Facility"),e=new d;e.id=a.editFacilityItem.id,e.set("title",a.editFacilityItem.title),e.set("feature",a.editFacilityItem.feature),e.set("description",a.editFacilityItem.description),null!=c&&e.set("picture",c),e.save({success:function(){var a=UIkit.modal("#edit");a.isActive()?a.hide():a.show(),b.notification("Facility has been saved"),h()},error:function(a){b.notification("Something went wrong")}})}function g(a){var c=Parse.Object.extend("Facility");new Parse.Query(c).get(a.id,{success:function(a){a.destroy({success:function(){var a=UIkit.modal("#delete");a.isActive()?a.hide():a.show(),b.notification("Facility has been removed"),h()},error:function(){b.notification("Something went wrong")}})},error:function(a,c){b.notification("Something went wrong")}})}function h(){var c=Parse.Object.extend("Facility");new Parse.Query(c).find({success:function(b){a.facilitiesImages=[];for(var c in b)a.facilitiesImages.push({id:b[c].id,picture:b[c].get("picture"),feature:b[c].get("feature"),description:b[c].get("description"),title:b[c].get("title")});a.$apply()},error:function(a){b.notification("Something went wrong")}})}a.facilitiesImages=[],a.facilityImage=null,a.facilityFeature=null,a.facilityTitle=null,a.facilityDescription=null,h(),a.addFacility=function(){if(a.facilityImage=$("#facilityPicture")[0].files[0],null==a.facilityFeature)b.notification("Feature must specified");else if(null==a.facilityImage)b.notification("No Image uploaded");else if(null==a.facilityTitle)b.notification("Title must specified");else if(null==a.facilityDescription)b.notification("Description must specified");else{var c=new FileReader;c.readAsDataURL(a.facilityImage),c.onload=function(){new Parse.File($("#facilityPicture")[0].files[0].name,{base64:c.result}).save({success:function(a){e(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}},a.editFacility=function(b){a.editFacilityItem=b},a.deleteFacility=function(b,c){a.deleteFacilityItem=b},a.updateFacility=function(){if(a.facilityImage=$("#editImageFacility")[0].files[0],""==a.editFacilityItem.title)b.notification("Title must specified");else if(""==a.editFacilityItem.feature)b.notification("Feature must specified");else if(""==a.editFacilityItem.description)b.notification("Description must specified");else if(null!=a.facilityImage){var c=new FileReader;c.readAsDataURL(a.facilityImage),c.onload=function(){new Parse.File($("#editImageFacility")[0].files[0].name,{base64:c.result}).save({success:function(a){f(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}else f(null)},a.dropFacility=function(){g(a.deleteFacilityItem)}}angular.module("Admin").controller("facilitiesCtrl",facilitiesCtrl),facilitiesCtrl.$inject=["$scope","uikitService","$state","$localStorage"];