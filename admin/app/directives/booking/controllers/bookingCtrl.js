function bookingCtrl(a,b,c,d){function e(){var c=Parse.Object.extend("Book"),d=new Parse.Query(c);d.include("cottage"),d.find({success:function(b){a.bookings=[];for(var c in b)a.bookings.push({id:b[c].id,startDate:f(b[c].get("startDate").toISOString()),endDate:f(b[c].get("endDate").toISOString()),firstname:b[c].get("firstname"),lastname:b[c].get("lastname"),mobile:b[c].get("mobile"),address:b[c].get("address"),email:b[c].get("email"),message:b[c].get("message"),cottage:b[c].get("cottage").get("name")});a.$apply()},error:function(a){b.notification("Something went wrong")}})}function f(a){var b=new Date(a);return["January","February","March","April","May","June","July","August","September","October","November","December"][b.getMonth()]+" "+b.getDate()+", "+b.getFullYear()}a.bookings=[],a.isLoadingBooking=!1,e(),a.viewBook=function(b){a.booking=b},a.deleteBooking=function(b){a.bookingId=b},a.deleteBook=function(){a.isLoadingBooking=!0;var c=Parse.Object.extend("Book");new Parse.Query(c).get(a.bookingId,{success:function(c){c.destroy({success:function(){var c=UIkit.modal("#delete");c.isActive()?c.hide():c.show(),b.notification("Reservation has been removed"),a.isLoadingBooking=!1,e()},error:function(){b.notification("Something went wrong")}})},error:function(a,c){b.notification("Something went wrong")}})}}angular.module("Admin").controller("bookingCtrl",bookingCtrl),bookingCtrl.$inject=["$scope","uikitService","$state","$localStorage"];