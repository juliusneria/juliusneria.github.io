function homeFeatureCtrl(a,b,c,d){function e(c){var d=Parse.Object.extend("Featured"),e=new d;e.set("name",a.featurename),e.set("picture",c),e.save({success:function(){var a=UIkit.modal("#addfeature");a.isActive()?a.hide():a.show(),b.notification("Feature has been saved"),h()},error:function(a){b.notification("Something went wrong")}})}function f(c){var d=Parse.Object.extend("Featured"),e=new d;e.id=a.editFeatureItem.id,e.set("name",a.editFeatureItem.name),null!=c&&e.set("picture",c),e.save({success:function(){var a=UIkit.modal("#editfeature");a.isActive()?a.hide():a.show(),b.notification("Feature has been saved"),h()},error:function(a){b.notification("Something went wrong")}})}function g(a){var c=Parse.Object.extend("Featured");new Parse.Query(c).get(a.id,{success:function(a){a.destroy({success:function(){var a=UIkit.modal("#deleteFeature");a.isActive()?a.hide():a.show(),b.notification("Feature has been removed"),h()},error:function(){b.notification("Something went wrong")}})},error:function(a,c){b.notification("Something went wrong")}})}function h(){var c=Parse.Object.extend("Featured");new Parse.Query(c).find({success:function(b){a.featureImages=[];for(var c in b)a.featureImages.push({id:b[c].id,picture:b[c].get("picture"),name:b[c].get("name")});a.$apply()},error:function(a){b.notification("Something went wrong")}})}a.featureImages=[],a.featureImage=null,a.featurename=null,h(),a.addFeature=function(){if(a.featureImage=$("#imageFeature")[0].files[0],null==a.featurename)b.notification("Name must specified");else if(null==a.featureImage)b.notification("No Image uploaded");else{var c=new FileReader;c.readAsDataURL(a.featureImage),c.onload=function(){new Parse.File($("#imageFeature")[0].files[0].name,{base64:c.result}).save({success:function(a){e(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}},a.editFeature=function(b){a.editFeatureItem=b},a.deleteFeature=function(b,c){a.deleteFeatureItem=b,a.type=c,console.log(a.deleteFeatureItem,a.type)},a.updateFeature=function(){if(a.featureImage=$("#editImageFeature")[0].files[0],""==a.editFeatureItem.name)b.notification("Name must specified");else if(null!=a.featureImage){var c=new FileReader;c.readAsDataURL(a.featureImage),c.onload=function(){new Parse.File($("#editImageFeature")[0].files[0].name,{base64:c.result}).save({success:function(a){f(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}else f(null)},a.dropFeature=function(){console.log(a.deleteFeatureItem,a.type),"feature"==a.type&&g(a.deleteFeatureItem,a.type)}}angular.module("Admin").controller("homeFeatureCtrl",homeFeatureCtrl),homeFeatureCtrl.$inject=["$scope","uikitService","$state","$localStorage"];