function homeFeatureCtrl(a,b,c,d){function e(c){var d=Parse.Object.extend("Featured"),e=new d;e.set("name",a.featurename),e.set("picture",c),e.save({success:function(){a.isLoadingFeature.add=!1;var c=UIkit.modal("#addfeature");c.isActive()?c.hide():c.show(),b.notification("Feature has been saved"),h()},error:function(a){b.notification("Something went wrong")}})}function f(c){var d=Parse.Object.extend("Featured"),e=new d;e.id=a.editFeatureItem.id,e.set("name",a.editFeatureItem.name),null!=c&&e.set("picture",c),e.save({success:function(){var c=UIkit.modal("#editfeature");c.isActive()?c.hide():c.show(),b.notification("Feature has been saved"),a.isLoadingFeature.edit=!1,h()},error:function(a){b.notification("Something went wrong")}})}function g(c){var d=Parse.Object.extend("Featured");new Parse.Query(d).get(c.id,{success:function(c){c.destroy({success:function(){var c=UIkit.modal("#deleteFeature");c.isActive()?c.hide():c.show(),b.notification("Feature has been removed"),a.isLoadingFeature.delete=!1,h()},error:function(){b.notification("Something went wrong")}})},error:function(a,c){b.notification("Something went wrong")}})}function h(){var c=Parse.Object.extend("Featured");new Parse.Query(c).find({success:function(b){a.featureImages=[];for(var c in b)a.featureImages.push({id:b[c].id,picture:b[c].get("picture"),name:b[c].get("name")});a.$apply()},error:function(a){b.notification("Something went wrong")}})}a.featureImages=[],a.featureImage=null,a.featurename=null,a.isLoadingFeature={add:!1,edit:!1,delete:!1},h(),a.addFeature=function(){if(a.featureImage=$("#imageFeature")[0].files[0],a.isLoadingFeature.add=!0,null==a.featurename)b.notification("Name must specified"),a.isLoadingFeature.add=!1;else if(null==a.featureImage)b.notification("No Image uploaded"),a.isLoadingFeature.add=!1;else{var c=new FileReader;c.readAsDataURL(a.featureImage),c.onload=function(){new Parse.File($("#imageFeature")[0].files[0].name,{base64:c.result}).save({success:function(a){e(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}},a.editFeature=function(b){a.editFeatureItem=b},a.deleteFeature=function(b,c){a.deleteFeatureItem=b,a.type=c},a.updateFeature=function(){if(a.featureImage=$("#editImageFeature")[0].files[0],a.isLoadingFeature.edit=!0,""==a.editFeatureItem.name)a.isLoadingFeature.edit=!1,b.notification("Name must specified");else if(null!=a.featureImage){var c=new FileReader;c.readAsDataURL(a.featureImage),c.onload=function(){new Parse.File($("#editImageFeature")[0].files[0].name,{base64:c.result}).save({success:function(a){f(a)},error:function(a){b.notification("Something went wrong")}})},c.onerror=function(a){b.notification("Something went wrong")}}else f(null)},a.dropFeature=function(){a.isLoadingFeature.delete=!0,"feature"==a.type&&g(a.deleteFeatureItem,a.type)}}angular.module("Admin").controller("homeFeatureCtrl",homeFeatureCtrl),homeFeatureCtrl.$inject=["$scope","uikitService","$state","$localStorage"];